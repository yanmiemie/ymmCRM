{"code":"(window[\"webpackJsonp\"]=window[\"webpackJsonp\"]||[]).push([[\"chunk-0a51a074\"],{1681:function(t,e,n){},\"22d7\":function(t,e,n){\"use strict\";var a=n(\"480b\"),r=n.n(a);r.a},\"480b\":function(t,e,n){},\"58c8\":function(t,e,n){},\"760e\":function(t,e,n){\"use strict\";n.r(e);var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n(\"div\",{staticClass:\"list row\"},[n(\"div\",{staticClass:\"col-md-8\"},[n(\"a\",{staticClass:\"text-3xl py-2 \"},[t._v(\" 日常收費紀錄 \")]),n(\"v-btn\",{staticClass:\"mx-2\",attrs:{flat:\"\"}},[n(\"router-link\",{attrs:{to:\"/PMNAdd\"}},[t._v(\"新增收費 \")])],1),n(\"ul\",{staticClass:\"list-group\"},t._l(t.tutorials,(function(e,a){return n(\"li\",{key:a,staticClass:\"list-group-item\",class:{active:a==t.currentIndex},on:{click:function(n){return t.setActiveTutorial(e,a)}}},[t._v(\" \"+t._s(e.userName)+\" , \"+t._s(e.input_money)+\" , \"),t._v(\" \"+t._s(e.status)+\" , \")])})),0),n(\"strong\",[t._v(\" 當下累積金額：\")]),t._v(\" \"+t._s(t.nowMoney)+\" \")],1),n(\"div\",{staticClass:\"col-md-4\"},[t.currentTutorial?n(\"div\",[n(\"tutorial-details\",{attrs:{tutorial:t.currentTutorial},on:{refreshList:t.refreshList}})],1):n(\"div\",[n(\"br\"),n(\"p\",[t._v(\" 點選 消費紀錄 修改...\")])])])])},r=[],o=(n(\"4160\"),n(\"159b\"),n(\"bbef\")),i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.currentTutorial?n(\"div\",{staticClass:\"edit-form\"},[n(\"h4\",[t._v(\" 修改內容 \")]),n(\"form\",[n(\"v-text-field\",{attrs:{label:\"請填寫 名稱\",solo:\"\",clearable:\"\"},model:{value:t.currentTutorial.name,callback:function(e){t.$set(t.currentTutorial,\"name\",e)},expression:\"currentTutorial.name\"}}),n(\"v-textarea\",{attrs:{solo:\"\",name:\"input-7-4\",label:\"請註記 用途\",clearable:\"\"},model:{value:t.currentTutorial.note,callback:function(e){t.$set(t.currentTutorial,\"note\",e)},expression:\"currentTutorial.note\"}}),n(\"v-select\",{attrs:{items:t.Moneyflow,label:\"請設定 ...使用類別\",multiple:\"\",chips:\"\",\"persistent-hint\":\"\"},model:{value:t.currentTutorial.type,callback:function(e){t.$set(t.currentTutorial,\"type\",e)},expression:\"currentTutorial.type\"}}),n(\"div\",{staticClass:\"form-group\"},[t._m(0),t._v(\" \"+t._s(t.currentTutorial.status?\"true\":\"false\")+\" \")])],1),1!=t.currentTutorial.status?n(\"button\",{staticClass:\"border-2 border-solid px-2 mr-2\",on:{click:function(e){return t.updatePublished(!1)}}},[t._v(\" 停用設定 \")]):n(\"button\",{staticClass:\"border-2 border-solid px-2 mr-2\",on:{click:function(e){return t.updatePublished(!0)}}},[t._v(\" 儲存 \")]),n(\"button\",{staticClass:\"border-2 border-solid px-2 mr-2\",on:{click:t.deleteTutorial}},[t._v(\" 刪除 \")]),n(\"button\",{staticClass:\"border-2 border-solid px-2\",attrs:{type:\"submit\"},on:{click:t.updateTutorial}},[t._v(\" 更新項目 \")]),n(\"p\",[t._v(t._s(t.message))])]):n(\"div\",[n(\"br\"),n(\"p\",[t._v(\" 請點選 消費項目...\")])])},u=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n(\"label\",[n(\"strong\",[t._v(\"狀態:\")])])}],s=(n(\"b0c0\"),n(\"5530\")),l={name:\"tutorial\",props:[\"tutorial\"],data:function(){return{currentTutorial:null,message:\"\",Moneyflow:[\"現金\",\"線上刷\",\"抵用券\",\"其他\"]}},watch:{tutorial:function(t){this.currentTutorial=Object(s[\"a\"])({},t),this.message=\"\"}},methods:{updatePublished:function(t){var e=this;o[\"a\"].update(this.currentTutorial.key,{published:t}).then((function(){e.currentTutorial.published=t,e.message=\"停用這項設定 (功能未完成)\"})).catch((function(t){console.log(t)}))},updateTutorial:function(){var t=this,e={name:this.currentTutorial.name,note:this.currentTutorial.note,type:this.currentTutorial.type,status:this.currentTutorial.note};o[\"a\"].update(this.currentTutorial.key,e).then((function(){t.message=\"更新成功!\"})).catch((function(t){console.log(t)}))},deleteTutorial:function(){var t=this;o[\"a\"].delete(this.currentTutorial.key).then((function(){t.$emit(\"refreshList\")})).catch((function(t){console.log(t)}))}},mounted:function(){this.message=\"\",this.currentTutorial=Object(s[\"a\"])({},this.tutorial)}},c=l,h=(n(\"9569\"),n(\"2877\")),d=n(\"6544\"),f=n.n(d),p=n(\"b974\"),v=n(\"8654\"),m=n(\"a844\"),b=Object(h[\"a\"])(c,i,u,!1,null,null,null),y=b.exports;f()(b,{VSelect:p[\"a\"],VTextField:v[\"a\"],VTextarea:m[\"a\"]});var T={name:\"PayMentNote-list\",components:{TutorialDetails:y},data:function(){return{nowMoney:0,Moneyflow:[\"現金\",\"線上刷\",\"抵用券\",\"其他\"],tutorials:[],currentTutorial:null,currentIndex:-1}},methods:{onDataChange:function(t){var e=[],n=0;t.forEach((function(t){var a=t.key,r=t.val();e.push({key:a,userName:r.userName,input_money:r.input_money,status:r.status}),1==r.status&&(n=parseInt(n)+parseInt(r.input_money))})),this.tutorials=e,this.nowMoney=n},refreshList:function(){this.currentTutorial=null,this.currentIndex=-1},setActiveTutorial:function(t,e){this.currentTutorial=t,this.currentIndex=e}},mounted:function(){o[\"a\"].getAll().on(\"value\",this.onDataChange)},beforeDestroy:function(){o[\"a\"].getAll().off(\"value\",this.onDataChange)}},g=T,_=(n(\"22d7\"),n(\"8336\")),w=Object(h[\"a\"])(g,a,r,!1,null,null,null);e[\"default\"]=w.exports;f()(w,{VBtn:_[\"a\"]})},9569:function(t,e,n){\"use strict\";var a=n(\"58c8\"),r=n.n(a);r.a},a844:function(t,e,n){\"use strict\";n(\"a9e3\");var a=n(\"5530\"),r=(n(\"1681\"),n(\"8654\")),o=n(\"58df\"),i=Object(o[\"a\"])(r[\"a\"]);e[\"a\"]=i.extend({name:\"v-textarea\",props:{autoGrow:Boolean,noResize:Boolean,rowHeight:{type:[Number,String],default:24,validator:function(t){return!isNaN(parseFloat(t))}},rows:{type:[Number,String],default:5,validator:function(t){return!isNaN(parseInt(t,10))}}},computed:{classes:function(){return Object(a[\"a\"])({\"v-textarea\":!0,\"v-textarea--auto-grow\":this.autoGrow,\"v-textarea--no-resize\":this.noResizeHandle},r[\"a\"].options.computed.classes.call(this))},noResizeHandle:function(){return this.noResize||this.autoGrow}},watch:{lazyValue:function(){this.autoGrow&&this.$nextTick(this.calculateInputHeight)},rowHeight:function(){this.autoGrow&&this.$nextTick(this.calculateInputHeight)}},mounted:function(){var t=this;setTimeout((function(){t.autoGrow&&t.calculateInputHeight()}),0)},methods:{calculateInputHeight:function(){var t=this.$refs.input;if(t){t.style.height=\"0\";var e=t.scrollHeight,n=parseInt(this.rows,10)*parseFloat(this.rowHeight);t.style.height=Math.max(n,e)+\"px\"}},genInput:function(){var t=r[\"a\"].options.methods.genInput.call(this);return t.tag=\"textarea\",delete t.data.attrs.type,t.data.attrs.rows=this.rows,t},onInput:function(t){r[\"a\"].options.methods.onInput.call(this,t),this.autoGrow&&this.calculateInputHeight()},onKeyDown:function(t){this.isFocused&&13===t.keyCode&&t.stopPropagation(),this.$emit(\"keydown\",t)}}})},bbef:function(t,e,n){\"use strict\";var a=n(\"d4ec\"),r=n(\"bee2\"),o=n(\"dc59\"),i=o[\"a\"].ref(\"/paymentnote\"),u=function(){function t(){Object(a[\"a\"])(this,t)}return Object(r[\"a\"])(t,[{key:\"getAll\",value:function(){return i}},{key:\"create\",value:function(t){return i.push(t)}},{key:\"update\",value:function(t,e){return i.child(t).update(e)}},{key:\"delete\",value:function(t){return i.child(t).remove()}},{key:\"deleteAll\",value:function(){return i.remove()}}]),t}();e[\"a\"]=new u}}]);","extractedComments":[]}
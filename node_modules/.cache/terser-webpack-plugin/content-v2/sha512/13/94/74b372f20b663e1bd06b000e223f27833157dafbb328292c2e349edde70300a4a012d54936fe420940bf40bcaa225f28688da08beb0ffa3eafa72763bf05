{"code":"(window[\"webpackJsonp\"]=window[\"webpackJsonp\"]||[]).push([[\"chunk-9d818fca\"],{1681:function(t,e,a){},\"712b\":function(t,e,a){},a31d:function(t,e,a){\"use strict\";a.r(e);var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a(\"div\",{staticClass:\"list row\"},[a(\"div\",{staticClass:\"col-md-8\"},[a(\"a\",{staticClass:\"text-3xl py-2 \"},[t._v(\" 目前收費設定 \")]),a(\"v-btn\",{staticClass:\"mx-2\",attrs:{flat:\"\"}},[a(\"router-link\",{attrs:{to:\"/PMSAdd\"}},[t._v(\"新增項目 \")])],1),a(\"ul\",{staticClass:\"list-group\"},t._l(t.tutorials,(function(e,r){return a(\"li\",{key:r,staticClass:\"list-group-item\",class:{active:r==t.currentIndex},on:{click:function(a){return t.setActiveTutorial(e,r)}}},[t._v(\" \"+t._s(e.name)+\" , \"+t._s(e.note)+\" , \"+t._s(e.price)+\" , \"+t._s(e.type)+\" , \"+t._s(e.status)+\" , \")])})),0)],1),a(\"div\",{staticClass:\"col-md-4\"},[t.currentTutorial?a(\"div\",[a(\"tutorial-details\",{attrs:{tutorial:t.currentTutorial},on:{refreshList:t.refreshList}})],1):a(\"div\",[a(\"br\"),a(\"p\",[t._v(\"請點選項目進行 查核\")])])])])},n=[],i=(a(\"4160\"),a(\"b0c0\"),a(\"159b\"),a(\"e4e4\")),u=function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.currentTutorial?a(\"div\",{staticClass:\"edit-form\"},[a(\"h4\",[t._v(\" 修改內容 \")]),1!=t.currentTutorial.status?a(\"button\",{staticClass:\"border-2 border-solid px-2 mr-2\",on:{click:function(e){return t.updatePublished(!1)}}},[t._v(\" 停用設定 \")]):a(\"button\",{staticClass:\"border-2 border-solid px-2 mr-2\",on:{click:function(e){return t.updatePublished(!0)}}},[t._v(\" 儲存 \")]),a(\"button\",{staticClass:\"border-2 border-solid px-2 mr-2\",on:{click:t.deleteTutorial}},[t._v(\" 刪除 \")]),a(\"button\",{staticClass:\"border-2 border-solid px-2\",attrs:{type:\"submit\"},on:{click:t.updateTutorial}},[t._v(\" 更新項目 \")]),a(\"p\",[t._v(t._s(t.message))]),a(\"br\"),a(\"br\"),a(\"form\",[a(\"v-text-field\",{attrs:{label:\"請填寫 名稱\",outlined:\"\",clearable:\"\"},model:{value:t.currentTutorial.name,callback:function(e){t.$set(t.currentTutorial,\"name\",e)},expression:\"currentTutorial.name\"}}),a(\"v-text-field\",{attrs:{label:\"請填寫 售價\",outlined:\"\",clearable:\"\"},model:{value:t.currentTutorial.price,callback:function(e){t.$set(t.currentTutorial,\"price\",e)},expression:\"currentTutorial.price\"}}),a(\"v-textarea\",{attrs:{outlined:\"\",name:\"input-7-4\",label:\"請註記 用途\",clearable:\"\",height:\"30px\"},model:{value:t.currentTutorial.note,callback:function(e){t.$set(t.currentTutorial,\"note\",e)},expression:\"currentTutorial.note\"}}),a(\"v-container\",{attrs:{fluid:\"\"}},[a(\"v-select\",{attrs:{items:t.BasicType,label:\"設定 使用類別\",\"persistent-hint\":\"\"},model:{value:t.currentTutorial.type,callback:function(e){t.$set(t.currentTutorial,\"type\",e)},expression:\"currentTutorial.type\"}})],1),a(\"div\",{staticClass:\"form-group\"},[t._m(0),t._v(\" \"+t._s(t.currentTutorial.status?\"true\":\"false\")+\" \")])],1)]):a(\"div\",[a(\"br\"),a(\"p\",[t._v(\" 請點選 消費項目...\")])])},o=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a(\"label\",[a(\"strong\",[t._v(\"狀態:\")])])}],s=a(\"5530\"),l={name:\"tutorial\",props:[\"tutorial\"],data:function(){return{currentTutorial:null,message:\"\",Moneyflow:[\"現金\",\"線上刷\",\"抵用券\",\"其他\"],BasicType:[\"會員類別\",\"接駁費用\",\"弓具費用\",\"加時費用\",\"場地費用\",\"會員類別\",\"付款方式\",\"會員點數\",\"其他\",\"特殊折價\"]}},watch:{tutorial:function(t){this.currentTutorial=Object(s[\"a\"])({},t),this.message=\"\"}},methods:{updatePublished:function(t){var e=this;i[\"a\"].update(this.currentTutorial.key,{published:t}).then((function(){e.currentTutorial.published=t,e.message=\"停用這項設定 (功能未完成)\"})).catch((function(t){console.log(t)}))},updateTutorial:function(){var t=this,e={name:this.currentTutorial.name,note:this.currentTutorial.note,type:this.currentTutorial.type,price:this.currentTutorial.price,status:this.currentTutorial.status};i[\"a\"].update(this.currentTutorial.key,e).then((function(){t.message=\"更新成功!\"})).catch((function(t){console.log(t)}))},deleteTutorial:function(){var t=this;i[\"a\"].delete(this.currentTutorial.key).then((function(){t.$emit(\"refreshList\")})).catch((function(t){console.log(t)}))}},mounted:function(){this.message=\"\",this.currentTutorial=Object(s[\"a\"])({},this.tutorial)}},c=l,d=(a(\"f0e5\"),a(\"2877\")),h=a(\"6544\"),f=a.n(h),p=a(\"a523\"),v=a(\"b974\"),b=a(\"8654\"),m=a(\"a844\"),T=Object(d[\"a\"])(c,u,o,!1,null,null,null),g=T.exports;f()(T,{VContainer:p[\"a\"],VSelect:v[\"a\"],VTextField:b[\"a\"],VTextarea:m[\"a\"]});var y={name:\"PayMentSetting-list\",components:{TutorialDetails:g},data:function(){return{Moneyflow:[\"現金\",\"線上刷\",\"抵用券\",\"其他\"],tutorials:[],currentTutorial:null,currentIndex:-1}},methods:{onDataChange:function(t){var e=[];t.forEach((function(t){var a=t.key,r=t.val();e.push({key:a,name:r.name,note:r.note,price:r.price,status:r.status,type:r.type})})),this.tutorials=e},refreshList:function(){this.currentTutorial=null,this.currentIndex=-1},setActiveTutorial:function(t,e){this.currentTutorial=t,this.currentIndex=e}},mounted:function(){i[\"a\"].getAll().on(\"value\",this.onDataChange)},beforeDestroy:function(){i[\"a\"].getAll().off(\"value\",this.onDataChange)}},x=y,w=(a(\"dddb\"),a(\"8336\")),k=Object(d[\"a\"])(x,r,n,!1,null,null,null);e[\"default\"]=k.exports;f()(k,{VBtn:w[\"a\"]})},a844:function(t,e,a){\"use strict\";a(\"a9e3\");var r=a(\"5530\"),n=(a(\"1681\"),a(\"8654\")),i=a(\"58df\"),u=Object(i[\"a\"])(n[\"a\"]);e[\"a\"]=u.extend({name:\"v-textarea\",props:{autoGrow:Boolean,noResize:Boolean,rowHeight:{type:[Number,String],default:24,validator:function(t){return!isNaN(parseFloat(t))}},rows:{type:[Number,String],default:5,validator:function(t){return!isNaN(parseInt(t,10))}}},computed:{classes:function(){return Object(r[\"a\"])({\"v-textarea\":!0,\"v-textarea--auto-grow\":this.autoGrow,\"v-textarea--no-resize\":this.noResizeHandle},n[\"a\"].options.computed.classes.call(this))},noResizeHandle:function(){return this.noResize||this.autoGrow}},watch:{lazyValue:function(){this.autoGrow&&this.$nextTick(this.calculateInputHeight)},rowHeight:function(){this.autoGrow&&this.$nextTick(this.calculateInputHeight)}},mounted:function(){var t=this;setTimeout((function(){t.autoGrow&&t.calculateInputHeight()}),0)},methods:{calculateInputHeight:function(){var t=this.$refs.input;if(t){t.style.height=\"0\";var e=t.scrollHeight,a=parseInt(this.rows,10)*parseFloat(this.rowHeight);t.style.height=Math.max(a,e)+\"px\"}},genInput:function(){var t=n[\"a\"].options.methods.genInput.call(this);return t.tag=\"textarea\",delete t.data.attrs.type,t.data.attrs.rows=this.rows,t},onInput:function(t){n[\"a\"].options.methods.onInput.call(this,t),this.autoGrow&&this.calculateInputHeight()},onKeyDown:function(t){this.isFocused&&13===t.keyCode&&t.stopPropagation(),this.$emit(\"keydown\",t)}}})},b77c:function(t,e,a){},dddb:function(t,e,a){\"use strict\";var r=a(\"712b\"),n=a.n(r);n.a},e4e4:function(t,e,a){\"use strict\";var r=a(\"d4ec\"),n=a(\"bee2\"),i=a(\"dc59\"),u=i[\"a\"].ref(\"/paymentsetting\"),o=function(){function t(){Object(r[\"a\"])(this,t)}return Object(n[\"a\"])(t,[{key:\"getAll\",value:function(){return u}},{key:\"create\",value:function(t){return u.push(t)}},{key:\"update\",value:function(t,e){return u.child(t).update(e)}},{key:\"delete\",value:function(t){return u.child(t).remove()}},{key:\"deleteAll\",value:function(){return u.remove()}}]),t}();e[\"a\"]=new o},f0e5:function(t,e,a){\"use strict\";var r=a(\"b77c\"),n=a.n(r);n.a}}]);","extractedComments":[]}
{"remainingRequest":"/Users/qiushunqun/Desktop/射箭專案/GitHub/17soooo/17soooo/node_modules/babel-loader/lib/index.js!/Users/qiushunqun/Desktop/射箭專案/GitHub/17soooo/17soooo/node_modules/eslint-loader/index.js??ref--13-0!/Users/qiushunqun/Desktop/射箭專案/GitHub/17soooo/17soooo/src/utils/container/scroller.js","dependencies":[{"path":"/Users/qiushunqun/Desktop/射箭專案/GitHub/17soooo/17soooo/src/utils/container/scroller.js","mtime":1634663364000},{"path":"/Users/qiushunqun/Desktop/射箭專案/GitHub/17soooo/17soooo/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/qiushunqun/Desktop/射箭專案/GitHub/17soooo/17soooo/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/qiushunqun/Desktop/射箭專案/GitHub/17soooo/17soooo/node_modules/eslint-loader/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuY29uY2F0IjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZmlsdGVyIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZmluZCI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmZvci1lYWNoIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkucmVkdWNlIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvd2ViLmRvbS1jb2xsZWN0aW9ucy5mb3ItZWFjaCI7CmltcG9ydCBfdG9Db25zdW1hYmxlQXJyYXkgZnJvbSAiL1VzZXJzL3FpdXNodW5xdW4vRGVza3RvcC9cdTVDMDRcdTdCQURcdTVDMDhcdTY4NDgvR2l0SHViLzE3c29vb28vMTdzb29vby9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vdG9Db25zdW1hYmxlQXJyYXkiOwoKLyogZXNsaW50LWRpc2FibGUgbm8tbG9uZS1ibG9ja3MgKi8KaW1wb3J0IHsgZ2V0U2Nyb2xsaW5nQXhpcywgaGFzQ2xhc3MsIGdldFZpc2libGVSZWN0IH0gZnJvbSAnLi91dGlscyc7CmltcG9ydCB7IHByZXZlbnRBdXRvU2Nyb2xsQ2xhc3MgfSBmcm9tICcuL2NvbnN0YW50cyc7CnZhciBtYXhTcGVlZCA9IDE1MDA7IC8vIHB4L3MKCnZhciBTY3JvbGxBeGlzID0gewogIHg6ICd4JywKICB5OiAneScsCiAgeHk6ICd4eScKfTsKCmZ1bmN0aW9uIGdldFNjcm9sbFBhcmFtcyhwb3NpdGlvbiwgYXhpcywgcmVjdCkgewogIHZhciBsZWZ0ID0gcmVjdC5sZWZ0LAogICAgICByaWdodCA9IHJlY3QucmlnaHQsCiAgICAgIHRvcCA9IHJlY3QudG9wLAogICAgICBib3R0b20gPSByZWN0LmJvdHRvbTsKICB2YXIgeCA9IHBvc2l0aW9uLngsCiAgICAgIHkgPSBwb3NpdGlvbi55OwoKICBpZiAoeCA8IGxlZnQgfHwgeCA+IHJpZ2h0IHx8IHkgPCB0b3AgfHwgeSA+IGJvdHRvbSkgewogICAgcmV0dXJuIG51bGw7CiAgfQoKICB2YXIgYmVnaW47CiAgdmFyIGVuZDsKICB2YXIgcG9zOwoKICBpZiAoYXhpcyA9PT0gJ3gnKSB7CiAgICBiZWdpbiA9IGxlZnQ7CiAgICBlbmQgPSByaWdodDsKICAgIHBvcyA9IHg7CiAgfSBlbHNlIHsKICAgIGJlZ2luID0gdG9wOwogICAgZW5kID0gYm90dG9tOwogICAgcG9zID0geTsKICB9CgogIHZhciBzY3JvbGxlclNpemUgPSBlbmQgLSBiZWdpbjsKICB2YXIgbW92ZURpc3RhbmNlID0gc2Nyb2xsZXJTaXplID4gNDAwID8gMTAwIDogc2Nyb2xsZXJTaXplIC8gNDsKCiAgaWYgKGVuZCAtIHBvcyA8IG1vdmVEaXN0YW5jZSkgewogICAgcmV0dXJuIHsKICAgICAgZGlyZWN0aW9uOiAnZW5kJywKICAgICAgc3BlZWRGYWN0b3I6IChtb3ZlRGlzdGFuY2UgLSAoZW5kIC0gcG9zKSkgLyBtb3ZlRGlzdGFuY2UKICAgIH07CiAgfSBlbHNlIGlmIChwb3MgLSBiZWdpbiA8IG1vdmVEaXN0YW5jZSkgewogICAgcmV0dXJuIHsKICAgICAgZGlyZWN0aW9uOiAnYmVnaW4nLAogICAgICBzcGVlZEZhY3RvcjogKG1vdmVEaXN0YW5jZSAtIChwb3MgLSBiZWdpbikpIC8gbW92ZURpc3RhbmNlCiAgICB9OwogIH0KCiAgcmV0dXJuIG51bGw7Cn0KCmZ1bmN0aW9uIGFkZFNjcm9sbFZhbHVlKGVsZW1lbnQsIGF4aXMsIHZhbHVlKSB7CiAgaWYgKGVsZW1lbnQpIHsKICAgIGlmIChlbGVtZW50ICE9PSB3aW5kb3cpIHsKICAgICAgaWYgKGF4aXMgPT09ICd4JykgewogICAgICAgIGVsZW1lbnQuc2Nyb2xsTGVmdCArPSB2YWx1ZTsKICAgICAgfSBlbHNlIHsKICAgICAgICBlbGVtZW50LnNjcm9sbFRvcCArPSB2YWx1ZTsKICAgICAgfQogICAgfSBlbHNlIHsKICAgICAgaWYgKGF4aXMgPT09ICd4JykgewogICAgICAgIGVsZW1lbnQuc2Nyb2xsQnkodmFsdWUsIDApOwogICAgICB9IGVsc2UgewogICAgICAgIGVsZW1lbnQuc2Nyb2xsQnkoMCwgdmFsdWUpOwogICAgICB9CiAgICB9CiAgfQp9Cgp2YXIgY3JlYXRlQW5pbWF0b3IgPSBmdW5jdGlvbiBjcmVhdGVBbmltYXRvcihlbGVtZW50KSB7CiAgdmFyIGF4aXMgPSBhcmd1bWVudHMubGVuZ3RoID4gMSAmJiBhcmd1bWVudHNbMV0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1sxXSA6ICd5JzsKICB2YXIgcmVxdWVzdCA9IG51bGw7CiAgdmFyIHN0YXJ0VGltZSA9IG51bGw7CiAgdmFyIGRpcmVjdGlvbiA9IG51bGw7CiAgdmFyIHNwZWVkID0gbnVsbDsKCiAgZnVuY3Rpb24gYW5pbWF0ZShfZGlyZWN0aW9uLCBfc3BlZWQpIHsKICAgIGRpcmVjdGlvbiA9IF9kaXJlY3Rpb247CiAgICBzcGVlZCA9IF9zcGVlZDsKICAgIHN0YXJ0KCk7CiAgfQoKICBmdW5jdGlvbiBzdGFydCgpIHsKICAgIGlmIChyZXF1ZXN0ID09PSBudWxsKSB7CiAgICAgIHJlcXVlc3QgPSByZXF1ZXN0QW5pbWF0aW9uRnJhbWUoZnVuY3Rpb24gKHRpbWVzdGFtcCkgewogICAgICAgIGlmIChzdGFydFRpbWUgPT09IG51bGwpIHsKICAgICAgICAgIHN0YXJ0VGltZSA9IHRpbWVzdGFtcDsKICAgICAgICB9CgogICAgICAgIHZhciB0aW1lRGlmZiA9IHRpbWVzdGFtcCAtIHN0YXJ0VGltZTsKICAgICAgICBzdGFydFRpbWUgPSB0aW1lc3RhbXA7CiAgICAgICAgdmFyIGRpc3RhbmNlRGlmZiA9IHRpbWVEaWZmIC8gMTAwMCAqIHNwZWVkOwogICAgICAgIGRpc3RhbmNlRGlmZiA9IGRpcmVjdGlvbiA9PT0gJ2JlZ2luJyA/IDAgLSBkaXN0YW5jZURpZmYgOiBkaXN0YW5jZURpZmY7CiAgICAgICAgYWRkU2Nyb2xsVmFsdWUoZWxlbWVudCwgYXhpcywgZGlzdGFuY2VEaWZmKTsKICAgICAgICByZXF1ZXN0ID0gbnVsbDsKICAgICAgICBzdGFydCgpOwogICAgICB9KTsKICAgIH0KICB9CgogIGZ1bmN0aW9uIHN0b3AoKSB7CiAgICBpZiAocmVxdWVzdCAhPT0gbnVsbCkgewogICAgICBjYW5jZWxBbmltYXRpb25GcmFtZShyZXF1ZXN0KTsKICAgICAgcmVxdWVzdCA9IG51bGw7CiAgICB9CgogICAgc3RhcnRUaW1lID0gbnVsbDsKICB9CgogIHJldHVybiB7CiAgICBhbmltYXRlOiBhbmltYXRlLAogICAgc3RvcDogc3RvcAogIH07Cn07CgpmdW5jdGlvbiByZWN0YW5nbGVHZXR0ZXIoZWxlbWVudCkgewogIHJldHVybiBmdW5jdGlvbiAoKSB7CiAgICByZXR1cm4gZ2V0VmlzaWJsZVJlY3QoZWxlbWVudCwgZWxlbWVudC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKSk7CiAgfTsKfQoKZnVuY3Rpb24gZ2V0U2Nyb2xsZXJBbmltYXRvcihjb250YWluZXIpIHsKICB2YXIgc2Nyb2xsZXJBbmltYXRvcnMgPSBbXTsKICB2YXIgY3VycmVudCA9IGNvbnRhaW5lci5lbGVtZW50OwoKICB3aGlsZSAoY3VycmVudCkgewogICAgdmFyIHNjcm9sbGluZ0F4aXMgPSBnZXRTY3JvbGxpbmdBeGlzKGN1cnJlbnQpOwoKICAgIGlmIChzY3JvbGxpbmdBeGlzICYmICFoYXNDbGFzcyhjdXJyZW50LCBwcmV2ZW50QXV0b1Njcm9sbENsYXNzKSkgewogICAgICB2YXIgYXhpc0FuaW1hdGlvbnMgPSB7fTsKCiAgICAgIHN3aXRjaCAoc2Nyb2xsaW5nQXhpcykgewogICAgICAgIGNhc2UgU2Nyb2xsQXhpcy54eToKICAgICAgICAgIHsKICAgICAgICAgICAgYXhpc0FuaW1hdGlvbnMueCA9IHsKICAgICAgICAgICAgICBhbmltYXRvcjogY3JlYXRlQW5pbWF0b3IoY3VycmVudCwgJ3gnKQogICAgICAgICAgICB9OwogICAgICAgICAgICBheGlzQW5pbWF0aW9ucy55ID0gewogICAgICAgICAgICAgIGFuaW1hdG9yOiBjcmVhdGVBbmltYXRvcihjdXJyZW50LCAneScpCiAgICAgICAgICAgIH07CiAgICAgICAgICB9CiAgICAgICAgICBicmVhazsKCiAgICAgICAgY2FzZSBTY3JvbGxBeGlzLng6CiAgICAgICAgICB7CiAgICAgICAgICAgIGF4aXNBbmltYXRpb25zLnggPSB7CiAgICAgICAgICAgICAgYW5pbWF0b3I6IGNyZWF0ZUFuaW1hdG9yKGN1cnJlbnQsICd4JykKICAgICAgICAgICAgfTsKICAgICAgICAgIH0KICAgICAgICAgIGJyZWFrOwoKICAgICAgICBjYXNlIFNjcm9sbEF4aXMueToKICAgICAgICAgIHsKICAgICAgICAgICAgYXhpc0FuaW1hdGlvbnMueSA9IHsKICAgICAgICAgICAgICBhbmltYXRvcjogY3JlYXRlQW5pbWF0b3IoY3VycmVudCwgJ3knKQogICAgICAgICAgICB9OwogICAgICAgICAgfQogICAgICAgICAgYnJlYWs7CgogICAgICAgIGRlZmF1bHQ6CiAgICAgIH0KCiAgICAgIHNjcm9sbGVyQW5pbWF0b3JzLnB1c2goewogICAgICAgIGF4aXNBbmltYXRpb25zOiBheGlzQW5pbWF0aW9ucywKICAgICAgICBnZXRSZWN0OiByZWN0YW5nbGVHZXR0ZXIoY3VycmVudCksCiAgICAgICAgc2Nyb2xsZXJFbGVtZW50OiBjdXJyZW50CiAgICAgIH0pOwogICAgfQoKICAgIGN1cnJlbnQgPSBjdXJyZW50LnBhcmVudEVsZW1lbnQ7CiAgfQoKICByZXR1cm4gc2Nyb2xsZXJBbmltYXRvcnM7Cn0KCmZ1bmN0aW9uIHNldFNjcm9sbFBhcmFtcyhhbmltYXRvckluZm9zLCBwb3NpdGlvbikgewogIGFuaW1hdG9ySW5mb3MuZm9yRWFjaChmdW5jdGlvbiAoYW5pbWF0b3IpIHsKICAgIHZhciBheGlzQW5pbWF0aW9ucyA9IGFuaW1hdG9yLmF4aXNBbmltYXRpb25zLAogICAgICAgIGdldFJlY3QgPSBhbmltYXRvci5nZXRSZWN0OwogICAgdmFyIHJlY3QgPSBnZXRSZWN0KCk7CgogICAgaWYgKGF4aXNBbmltYXRpb25zLngpIHsKICAgICAgYXhpc0FuaW1hdGlvbnMueC5zY3JvbGxQYXJhbXMgPSBnZXRTY3JvbGxQYXJhbXMocG9zaXRpb24sICd4JywgcmVjdCk7CiAgICAgIGFuaW1hdG9yLmNhY2hlZFJlY3QgPSByZWN0OwogICAgfQoKICAgIGlmIChheGlzQW5pbWF0aW9ucy55KSB7CiAgICAgIGF4aXNBbmltYXRpb25zLnkuc2Nyb2xsUGFyYW1zID0gZ2V0U2Nyb2xsUGFyYW1zKHBvc2l0aW9uLCAneScsIHJlY3QpOwogICAgICBhbmltYXRvci5jYWNoZWRSZWN0ID0gcmVjdDsKICAgIH0KICB9KTsKfQoKZnVuY3Rpb24gZ2V0VG9wbW9zdFNjcm9sbEFuaW1hdG9yKGFuaW1hdG9ySW5mb3MsIHBvc2l0aW9uKSB7CiAgdmFyIGN1cnJlbnQgPSBkb2N1bWVudC5lbGVtZW50RnJvbVBvaW50KHBvc2l0aW9uLngsIHBvc2l0aW9uLnkpOwoKICB3aGlsZSAoY3VycmVudCkgewogICAgdmFyIHNjcm9sbEFuaW1hdG9yID0gYW5pbWF0b3JJbmZvcy5maW5kKGZ1bmN0aW9uIChwKSB7CiAgICAgIHJldHVybiBwLnNjcm9sbGVyRWxlbWVudCA9PT0gY3VycmVudDsKICAgIH0pOwoKICAgIGlmIChzY3JvbGxBbmltYXRvcikgewogICAgICByZXR1cm4gc2Nyb2xsQW5pbWF0b3I7CiAgICB9CgogICAgY3VycmVudCA9IGN1cnJlbnQucGFyZW50RWxlbWVudDsKICB9CgogIHJldHVybiBudWxsOwp9CgpleHBvcnQgZGVmYXVsdCAoZnVuY3Rpb24gKGNvbnRhaW5lcnMpIHsKICB2YXIgbWF4U2Nyb2xsU3BlZWQgPSBhcmd1bWVudHMubGVuZ3RoID4gMSAmJiBhcmd1bWVudHNbMV0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1sxXSA6IG1heFNwZWVkOwogIHZhciBhbmltYXRvckluZm9zID0gY29udGFpbmVycy5yZWR1Y2UoZnVuY3Rpb24gKGFjYywgY29udGFpbmVyKSB7CiAgICB2YXIgZmlsdGVyZWRBbmltYXRvcnMgPSBnZXRTY3JvbGxlckFuaW1hdG9yKGNvbnRhaW5lcikuZmlsdGVyKGZ1bmN0aW9uIChwKSB7CiAgICAgIHJldHVybiAhYWNjLmZpbmQoZnVuY3Rpb24gKHEpIHsKICAgICAgICByZXR1cm4gcS5zY3JvbGxlckVsZW1lbnQgPT09IHAuc2Nyb2xsZXJFbGVtZW50OwogICAgICB9KTsKICAgIH0pOwogICAgcmV0dXJuIFtdLmNvbmNhdChfdG9Db25zdW1hYmxlQXJyYXkoYWNjKSwgX3RvQ29uc3VtYWJsZUFycmF5KGZpbHRlcmVkQW5pbWF0b3JzKSk7CiAgfSwgW10pOwogIHJldHVybiBmdW5jdGlvbiAoX3JlZikgewogICAgdmFyIGRyYWdnYWJsZUluZm8gPSBfcmVmLmRyYWdnYWJsZUluZm8sCiAgICAgICAgcmVzZXQgPSBfcmVmLnJlc2V0OwoKICAgIGlmIChyZXNldCkgewogICAgICBhbmltYXRvckluZm9zLmZvckVhY2goZnVuY3Rpb24gKHApIHsKICAgICAgICBwLmF4aXNBbmltYXRpb25zLnggJiYgcC5heGlzQW5pbWF0aW9ucy54LmFuaW1hdG9yLnN0b3AoKTsKICAgICAgICBwLmF4aXNBbmltYXRpb25zLnkgJiYgcC5heGlzQW5pbWF0aW9ucy55LmFuaW1hdG9yLnN0b3AoKTsKICAgICAgfSk7CiAgICAgIHJldHVybjsKICAgIH0KCiAgICBpZiAoZHJhZ2dhYmxlSW5mbykgewogICAgICBzZXRTY3JvbGxQYXJhbXMoYW5pbWF0b3JJbmZvcywgZHJhZ2dhYmxlSW5mby5tb3VzZVBvc2l0aW9uKTsKICAgICAgYW5pbWF0b3JJbmZvcy5mb3JFYWNoKGZ1bmN0aW9uIChhbmltYXRvcikgewogICAgICAgIHZhciBfYW5pbWF0b3IkYXhpc0FuaW1hdGkgPSBhbmltYXRvci5heGlzQW5pbWF0aW9ucywKICAgICAgICAgICAgeCA9IF9hbmltYXRvciRheGlzQW5pbWF0aS54LAogICAgICAgICAgICB5ID0gX2FuaW1hdG9yJGF4aXNBbmltYXRpLnk7CgogICAgICAgIGlmICh4KSB7CiAgICAgICAgICBpZiAoeC5zY3JvbGxQYXJhbXMpIHsKICAgICAgICAgICAgdmFyIF94JHNjcm9sbFBhcmFtcyA9IHguc2Nyb2xsUGFyYW1zLAogICAgICAgICAgICAgICAgZGlyZWN0aW9uID0gX3gkc2Nyb2xsUGFyYW1zLmRpcmVjdGlvbiwKICAgICAgICAgICAgICAgIHNwZWVkRmFjdG9yID0gX3gkc2Nyb2xsUGFyYW1zLnNwZWVkRmFjdG9yOwogICAgICAgICAgICB4LmFuaW1hdG9yLmFuaW1hdGUoZGlyZWN0aW9uLCBzcGVlZEZhY3RvciAqIG1heFNjcm9sbFNwZWVkKTsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIHguYW5pbWF0b3Iuc3RvcCgpOwogICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgaWYgKHkpIHsKICAgICAgICAgIGlmICh5LnNjcm9sbFBhcmFtcykgewogICAgICAgICAgICB2YXIgX3kkc2Nyb2xsUGFyYW1zID0geS5zY3JvbGxQYXJhbXMsCiAgICAgICAgICAgICAgICBfZGlyZWN0aW9uMiA9IF95JHNjcm9sbFBhcmFtcy5kaXJlY3Rpb24sCiAgICAgICAgICAgICAgICBfc3BlZWRGYWN0b3IgPSBfeSRzY3JvbGxQYXJhbXMuc3BlZWRGYWN0b3I7CiAgICAgICAgICAgIHkuYW5pbWF0b3IuYW5pbWF0ZShfZGlyZWN0aW9uMiwgX3NwZWVkRmFjdG9yICogbWF4U2Nyb2xsU3BlZWQpOwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgeS5hbmltYXRvci5zdG9wKCk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9KTsKICAgICAgdmFyIG92ZXJsYXBwaW5nQW5pbWF0b3JzID0gYW5pbWF0b3JJbmZvcy5maWx0ZXIoZnVuY3Rpb24gKHApIHsKICAgICAgICByZXR1cm4gcC5jYWNoZWRSZWN0OwogICAgICB9KTsKCiAgICAgIGlmIChvdmVybGFwcGluZ0FuaW1hdG9ycy5sZW5ndGggJiYgb3ZlcmxhcHBpbmdBbmltYXRvcnMubGVuZ3RoID4gMSkgewogICAgICAgIC8vIHN0b3AgYW5pbWF0aW9ucyBleGNlcHQgdG9wbW9zdAogICAgICAgIHZhciB0b3BTY3JvbGxlckFuaW1hdG9yID0gZ2V0VG9wbW9zdFNjcm9sbEFuaW1hdG9yKG92ZXJsYXBwaW5nQW5pbWF0b3JzLCBkcmFnZ2FibGVJbmZvLm1vdXNlUG9zaXRpb24pOwoKICAgICAgICBpZiAodG9wU2Nyb2xsZXJBbmltYXRvcikgewogICAgICAgICAgb3ZlcmxhcHBpbmdBbmltYXRvcnMuZm9yRWFjaChmdW5jdGlvbiAocCkgewogICAgICAgICAgICBpZiAocCAhPT0gdG9wU2Nyb2xsZXJBbmltYXRvcikgewogICAgICAgICAgICAgIHAuYXhpc0FuaW1hdGlvbnMueCAmJiBwLmF4aXNBbmltYXRpb25zLnguYW5pbWF0b3Iuc3RvcCgpOwogICAgICAgICAgICAgIHAuYXhpc0FuaW1hdGlvbnMueSAmJiBwLmF4aXNBbmltYXRpb25zLnkuYW5pbWF0b3Iuc3RvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9KTsKICAgICAgICB9CiAgICAgIH0KICAgIH0KICB9Owp9KTs="},{"version":3,"sources":["/Users/qiushunqun/Desktop/射箭專案/GitHub/17soooo/17soooo/src/utils/container/scroller.js"],"names":["getScrollingAxis","hasClass","getVisibleRect","preventAutoScrollClass","maxSpeed","ScrollAxis","x","y","xy","getScrollParams","position","axis","rect","left","right","top","bottom","begin","end","pos","scrollerSize","moveDistance","direction","speedFactor","addScrollValue","element","value","window","scrollLeft","scrollTop","scrollBy","createAnimator","request","startTime","speed","animate","_direction","_speed","start","requestAnimationFrame","timestamp","timeDiff","distanceDiff","stop","cancelAnimationFrame","rectangleGetter","getBoundingClientRect","getScrollerAnimator","container","scrollerAnimators","current","scrollingAxis","axisAnimations","animator","push","getRect","scrollerElement","parentElement","setScrollParams","animatorInfos","forEach","scrollParams","cachedRect","getTopmostScrollAnimator","document","elementFromPoint","scrollAnimator","find","p","containers","maxScrollSpeed","reduce","acc","filteredAnimators","filter","q","draggableInfo","reset","mousePosition","overlappingAnimators","length","topScrollerAnimator"],"mappings":"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","sourcesContent":["/* eslint-disable no-lone-blocks */\n\nimport { getScrollingAxis, hasClass, getVisibleRect } from './utils';\nimport { preventAutoScrollClass } from './constants';\nconst maxSpeed = 1500; // px/s\n\nconst ScrollAxis = {\n  x: 'x',\n  y: 'y',\n  xy: 'xy'\n};\nfunction getScrollParams (position, axis, rect) {\n  const { left, right, top, bottom } = rect;\n  const { x, y } = position;\n  if (x < left || x > right || y < top || y > bottom) {\n    return null;\n  }\n  let begin;\n  let end;\n  let pos;\n  if (axis === 'x') {\n    begin = left;\n    end = right;\n    pos = x;\n  } else {\n    begin = top;\n    end = bottom;\n    pos = y;\n  }\n  const scrollerSize = end - begin;\n  const moveDistance = scrollerSize > 400 ? 100 : scrollerSize / 4;\n  if (end - pos < moveDistance) {\n    return {\n      direction: 'end',\n      speedFactor: (moveDistance - (end - pos)) / moveDistance\n    };\n  } else if (pos - begin < moveDistance) {\n    return {\n      direction: 'begin',\n      speedFactor: (moveDistance - (pos - begin)) / moveDistance\n    };\n  }\n  return null;\n}\nfunction addScrollValue (element, axis, value) {\n  if (element) {\n    if (element !== window) {\n      if (axis === 'x') {\n        element.scrollLeft += value;\n      } else {\n        element.scrollTop += value;\n      }\n    } else {\n      if (axis === 'x') {\n        element.scrollBy(value, 0);\n      } else {\n        element.scrollBy(0, value);\n      }\n    }\n  }\n}\nconst createAnimator = (element, axis = 'y') => {\n  let request = null;\n  let startTime = null;\n  let direction = null;\n  let speed = null;\n  function animate (_direction, _speed) {\n    direction = _direction;\n    speed = _speed;\n    start();\n  }\n  function start () {\n    if (request === null) {\n      request = requestAnimationFrame((timestamp) => {\n        if (startTime === null) {\n          startTime = timestamp;\n        }\n        const timeDiff = timestamp - startTime;\n        startTime = timestamp;\n        let distanceDiff = (timeDiff / 1000) * speed;\n        distanceDiff = direction === 'begin' ? (0 - distanceDiff) : distanceDiff;\n        addScrollValue(element, axis, distanceDiff);\n        request = null;\n        start();\n      });\n    }\n  }\n  function stop () {\n    if (request !== null) {\n      cancelAnimationFrame(request);\n      request = null;\n    }\n    startTime = null;\n  }\n  return {\n    animate,\n    stop\n  };\n};\nfunction rectangleGetter (element) {\n  return () => {\n    return getVisibleRect(element, element.getBoundingClientRect());\n  };\n}\nfunction getScrollerAnimator (container) {\n  const scrollerAnimators = [];\n  let current = container.element;\n  while (current) {\n    const scrollingAxis = getScrollingAxis(current);\n    if (scrollingAxis && !hasClass(current, preventAutoScrollClass)) {\n      const axisAnimations = {};\n      switch (scrollingAxis) {\n        case ScrollAxis.xy:\n          {\n            axisAnimations.x = {\n              animator: createAnimator(current, 'x'),\n            };\n            axisAnimations.y = {\n              animator: createAnimator(current, 'y'),\n            };\n          }\n          break;\n        case ScrollAxis.x:\n          {\n            axisAnimations.x = {\n              animator: createAnimator(current, 'x'),\n            };\n          }\n          break;\n        case ScrollAxis.y:\n          {\n            axisAnimations.y = {\n              animator: createAnimator(current, 'y'),\n            };\n          }\n          break;\n        default:\n      }\n      scrollerAnimators.push({\n        axisAnimations,\n        getRect: rectangleGetter(current),\n        scrollerElement: current,\n      });\n    }\n    current = current.parentElement;\n  }\n  return scrollerAnimators;\n}\nfunction setScrollParams (animatorInfos, position) {\n  animatorInfos.forEach((animator) => {\n    const { axisAnimations, getRect } = animator;\n    const rect = getRect();\n    if (axisAnimations.x) {\n      axisAnimations.x.scrollParams = getScrollParams(position, 'x', rect);\n      animator.cachedRect = rect;\n    }\n    if (axisAnimations.y) {\n      axisAnimations.y.scrollParams = getScrollParams(position, 'y', rect);\n      animator.cachedRect = rect;\n    }\n  });\n}\nfunction getTopmostScrollAnimator (animatorInfos, position) {\n  let current = document.elementFromPoint(position.x, position.y);\n  while (current) {\n    const scrollAnimator = animatorInfos.find(p => p.scrollerElement === current);\n    if (scrollAnimator) {\n      return scrollAnimator;\n    }\n    current = current.parentElement;\n  }\n  return null;\n}\nexport default (containers, maxScrollSpeed = maxSpeed) => {\n  const animatorInfos = containers.reduce((acc, container) => {\n    const filteredAnimators = getScrollerAnimator(container).filter(p => {\n      return !acc.find(q => q.scrollerElement === p.scrollerElement);\n    });\n    return [...acc, ...filteredAnimators];\n  }, []);\n  return ({ draggableInfo, reset }) => {\n    if (reset) {\n      animatorInfos.forEach(p => {\n        p.axisAnimations.x && p.axisAnimations.x.animator.stop();\n        p.axisAnimations.y && p.axisAnimations.y.animator.stop();\n      });\n      return;\n    }\n    if (draggableInfo) {\n      setScrollParams(animatorInfos, draggableInfo.mousePosition);\n      animatorInfos.forEach(animator => {\n        const { x, y } = animator.axisAnimations;\n        if (x) {\n          if (x.scrollParams) {\n            const { direction, speedFactor } = x.scrollParams;\n            x.animator.animate(direction, speedFactor * maxScrollSpeed);\n          } else {\n            x.animator.stop();\n          }\n        }\n        if (y) {\n          if (y.scrollParams) {\n            const { direction, speedFactor } = y.scrollParams;\n            y.animator.animate(direction, speedFactor * maxScrollSpeed);\n          } else {\n            y.animator.stop();\n          }\n        }\n      });\n      const overlappingAnimators = animatorInfos.filter(p => p.cachedRect);\n      if (overlappingAnimators.length && overlappingAnimators.length > 1) {\n        // stop animations except topmost\n        const topScrollerAnimator = getTopmostScrollAnimator(overlappingAnimators, draggableInfo.mousePosition);\n        if (topScrollerAnimator) {\n          overlappingAnimators.forEach(p => {\n            if (p !== topScrollerAnimator) {\n              p.axisAnimations.x && p.axisAnimations.x.animator.stop();\n              p.axisAnimations.y && p.axisAnimations.y.animator.stop();\n            }\n          });\n        }\n      }\n    }\n  };\n};\n"]}]}